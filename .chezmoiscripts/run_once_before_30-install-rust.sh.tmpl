#!/bin/bash
# ABOUTME: Installs Rust toolchain via rustup
# ABOUTME: Cargo packages are installed separately via run_onchange script

set -euo pipefail

# Install rustup if not already installed
if ! command -v rustup &> /dev/null; then
    echo "Installing rustup..."
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y --no-modify-path

    # Source cargo env for this script
    source "$HOME/.cargo/env"
    echo "✓ Rustup installed successfully"
else
    echo "✓ Rustup is already installed"
fi

echo "✓ Rust toolchain setup complete"
